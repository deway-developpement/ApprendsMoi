<app-header theme="light"></app-header>

<div class="dashboard-wrapper">
  
  <div class="dashboard-header-bg">
    <div class="header-content">
      <h1 class="welcome-title">Bonjour {{ userName }} ðŸ‘‹</h1>
      <p class="welcome-subtitle">PrÃªt(e) Ã  apprendre quelque chose de nouveau aujourd'hui ?</p>
    </div>
  </div>

  <main class="dashboard-container">
    
    <section class="widgets-section">
      <div class="widgets-grid">
        
        <div class="widget-card accent-blue">
          <div class="widget-top">
            <div class="icon-circle blue">
              <app-small-icon icon="/assets/icons/schedule.svg" [size]="30"></app-small-icon>
            </div>
            <h3>Prochain cours</h3>
          </div>
          <div class="widget-content" *ngIf="nextCourse; else noCourse">
            <div class="main-info">
              <span class="big-date">{{ nextCourse.date | date:'dd MMM' }}</span>
              <span class="time">{{ nextCourse.date | date:'HH:mm' }}</span>
            </div>
            <p class="subtext">Avec {{ nextCourse.tutorName }} ({{ nextCourse.subject }})</p>
            <div class="widget-action">
              <app-button variant="ghost">Voir le dÃ©tail</app-button>
            </div>
          </div>
          <ng-template #noCourse>
            <p class="empty-state">Aucun cours Ã  venir.</p>
          </ng-template>
        </div>

        <div class="widget-card accent-orange">
          <div class="widget-top">
             <div class="icon-circle orange">
               <app-small-icon icon="/assets/icons/email 2 1.svg" [size]="30"></app-small-icon>
             </div>
            <h3>Messages</h3>
          </div>
          <div class="widget-content" *ngIf="lastMessage">
            <p class="message-preview">"{{ lastMessage.preview | slice:0:50 }}..."</p>
            <p class="subtext">De: <strong>{{ lastMessage.sender }}</strong></p>
            <div class="widget-action">
              <app-button variant="ghost">Ouvrir la messagerie</app-button>
            </div>
          </div>
        </div>

      </div>
    </section>

    <app-courses-schedule [courses]="courses" (action)="openVisio($event)"></app-courses-schedule>

  </main>
</div>
