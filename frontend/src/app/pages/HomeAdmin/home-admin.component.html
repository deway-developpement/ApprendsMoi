<app-header theme="light"></app-header>

<div class="dashboard-wrapper">
  
  <div class="dashboard-header-bg admin-theme">
    <div class="header-content">
      <h1 class="welcome-title">Bonjour Admin ðŸ‘‹</h1>
      <p class="welcome-subtitle">Voici l'Ã©tat de la plateforme aujourd'hui.</p>
    </div>
  </div>

  <main class="dashboard-container">
    
    <section class="kpi-section">
      <div class="kpi-grid">
        <div class="kpi-card" *ngFor="let kpi of kpis" [ngClass]="kpi.colorClass">
          <div class="kpi-icon">
            <app-icon [icon]="kpi.icon" [size]="32"></app-icon>
          </div>
          <div class="kpi-info">
            <span class="kpi-value">{{ kpi.value }}</span>
            <span class="kpi-label">{{ kpi.label }}</span>
            <span class="kpi-trend" *ngIf="kpi.trend" 
                  [class.positive]="kpi.trend.startsWith('+')" 
                  [class.negative]="kpi.trend.startsWith('-')">
              {{ kpi.trend }} vs M-1
            </span>
          </div>
        </div>
      </div>
    </section>

    <div class="content-split">
      
      <section class="action-section">
        <div class="section-header">
          <h2>âš¡ Actions requises</h2>
          <span class="badge-count">{{ alerts.length }}</span>
        </div>
        
        <div class="card-list">
          <div class="action-card" *ngFor="let alert of paginatedAlerts" [class.urgent]="alert.priority === 'high'">
            <div class="status-indicator"></div>
            <div class="action-icon" [ngSwitch]="alert.type">
               <app-small-icon *ngSwitchCase="'document'" icon="/assets/icons/document.svg" [size]="30"></app-small-icon>
               <app-small-icon *ngSwitchCase="'litige'" icon="/assets/icons/problem.svg" [size]="30"></app-small-icon>
               <app-small-icon *ngSwitchCase="'review'" icon="/assets/icons/star.svg" [size]="30"></app-small-icon>
            </div>
            <div class="action-content">
              <h3>{{ alert.title }}</h3>
              <p>{{ alert.subtitle }}</p>
              <span class="date">{{ alert.date | date:'dd MMM Ã  HH:mm' }}</span>
            </div>
            <div class="action-btn">
              <app-button variant="ghost" size="small">Traiter</app-button>
            </div>
          </div>
          
          <div class="empty-state" *ngIf="alerts.length === 0">
            <p>ðŸŽ‰ Rien Ã  signaler, tout est Ã  jour !</p>
          </div>
        </div>

        <div class="pagination-controls" *ngIf="alerts.length > itemsPerPage">
          <button class="nav-btn" (click)="prevPage()" [disabled]="currentPage === 1">
            <app-small-icon icon="/assets/icons/chevron-left.svg" [size]="24"></app-small-icon>
          </button>
          
          <span class="page-info">Page {{ currentPage }} sur {{ totalPages }}</span>
          
          <button class="nav-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
            <app-small-icon icon="/assets/icons/chevron_right.svg" [size]="24"></app-small-icon>
          </button>
        </div>
      </section>

      <section class="activity-section">
        <div class="section-header">
          <h2>ðŸ“¡ ActivitÃ© rÃ©cente</h2>
          <app-button variant="ghost">Voir tout</app-button>
        </div>

        <div class="activity-list">
          <div class="activity-item" *ngFor="let activity of activities">
            <div class="timeline-dot"></div>
            <div class="activity-content">
              <p class="activity-text">{{ activity.description }}</p>
              <span class="activity-time">{{ activity.time }}</span>
            </div>
          </div>
        </div>
      </section>

    </div>

    <section class="shortcuts-section">
      <h3>AccÃ¨s Rapide</h3>
      <div class="shortcuts-grid">
        <button class="shortcut-btn" (click)="navigateTo('/admin/users')">
          <app-icon icon="/assets/icons/user.svg" [size]="28"></app-icon>
          <span>GÃ©rer Utilisateurs</span>
        </button>
        <button class="shortcut-btn" (click)="navigateTo('/admin/courses')">
          <app-icon icon="/assets/icons/book-fill.svg" [size]="28"></app-icon>
          <span>GÃ©rer Cours</span>
        </button>
        <button class="shortcut-btn" (click)="navigateTo('/admin/finance')">
          <app-icon icon="/assets/icons/account-balance.svg" [size]="28"></app-icon>
          <span>ComptabilitÃ©</span>
        </button>
        <button class="shortcut-btn" (click)="navigateTo('/admin/settings')">
          <app-icon icon="/assets/icons/settings.svg" [size]="28"></app-icon>
          <span>Configuration</span>
        </button>
      </div>
    </section>

  </main>
</div>