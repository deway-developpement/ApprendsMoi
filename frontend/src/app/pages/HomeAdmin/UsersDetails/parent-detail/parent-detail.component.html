<div class="dashboard-wrapper">
  
  <div class="header-bg">
    <div class="header-content">
      
      <div class="identity-group">
        <div class="avatar-large parent-theme">
          {{ user.firstName?.charAt(0) }}
        </div>
        <div class="text-info">
          <h1 class="user-name">{{ user.firstName }} {{ user.lastName }}</h1>
          <div class="badges-row">
            <span class="badge-role">Parent</span>
            <span class="user-email">{{ user.email }}</span>
          </div>
        </div>
      </div>
      
      <div class="header-actions">
        <app-button variant="ghost" (click)="suspendParent()">
          Suspendre
        </app-button>
        <app-button variant="primary">
          Editer le profil
        </app-button>
      </div>

    </div>
  </div>

  <main class="dashboard-container">
    
    <section class="widgets-section">
      <div class="widgets-grid">
        
        <div class="widget-card accent-green">
          <div class="widget-top">
            <div class="icon-circle green">
              <app-small-icon icon="assets/icons/wallet.svg" [size]="32"></app-small-icon>
            </div>
            <h3>Total D√©pens√©</h3>
          </div>
          <div class="widget-content">
            <div class="main-info">
              <span class="big-number">{{ parentStats.totalSpent | number:'1.0-2' }} ‚Ç¨</span>
            </div>
            <p class="subtext">Status: <strong class="text-green">{{ parentStats.paymentStatus }}</strong></p>
          </div>
        </div>

        <div class="widget-card accent-blue">
          <div class="widget-top">
             <div class="icon-circle blue">
               <app-small-icon icon="assets/icons/book-fill.svg" [size]="32"></app-small-icon>
             </div>
            <h3>Volume Commandes</h3>
          </div>
          <div class="widget-content">
            <div class="main-info">
              <span class="big-number">{{ parentStats.coursesBooked }}</span>
            </div>
            <p class="subtext">Cours r√©serv√©s au total</p>
          </div>
        </div>

        <div class="widget-card accent-purple">
          <div class="widget-top">
            <div class="icon-circle purple">
              <app-small-icon icon="assets/icons/users.svg" [size]="32"></app-small-icon>
            </div>
            <h3>Famille</h3>
          </div>
          <div class="widget-content">
            <div class="main-info">
              <span class="big-number">{{ parentStats.activeChildren }}</span>
              <span class="sub-info">Enfants</span>
            </div>
            <p class="subtext">Derni√®re connexion: {{ parentStats.lastLogin }}</p>
          </div>
        </div>

      </div>
    </section>

    <div class="content-split">
      
      <section class="details-card">
        <div class="card-header">
          <h2>üë∂ Enfants rattach√©s</h2>
        </div>

        <div class="children-list">
          <div class="child-item" *ngFor="let child of children" [routerLink]="['/admin/users', child.id]">
            <div class="child-avatar" [style.background-color]="child.avatarColor">
              {{ child.firstName.charAt(0) }}
            </div>
            <div class="child-info">
              <span class="child-name">{{ child.firstName }}</span>
              <span class="child-level">{{ child.level }}</span>
            </div>
            <div class="child-arrow">
               <app-small-icon icon="assets/icons/eye.svg" [size]="20"></app-small-icon>
            </div>
          </div>

          <div class="child-item add-new">
             <div class="child-avatar add">+</div>
             <div class="child-info">
                <span class="child-name text-muted">Ajouter un enfant</span>
             </div>
          </div>
        </div>
      </section>

      <section class="details-card">
        <div class="card-header">
          <h2>üí≥ Derni√®res Factures</h2>
        </div>
        
        <div class="invoice-list">
          <div class="invoice-item" *ngFor="let inv of transactions">
            <div class="inv-left">
              <div class="inv-id">{{ inv.id }}</div>
              <div class="inv-date">{{ inv.date }}</div>
            </div>
            <div class="inv-mid">
                {{ inv.detail }}
            </div>
            <div class="inv-right">
              <span class="inv-amount">-{{ inv.amount }} ‚Ç¨</span>
              <span class="status-pill paid">Pay√©</span>
            </div>
          </div>
        </div>

        <div class="card-footer">
          <app-button variant="ghost" >Voir toutes les transactions</app-button>
        </div>
      </section>

    </div>
  </main>
</div>