<div class="dashboard-wrapper">
  
  <div class="header-bg">
    <div class="header-content">
      
      <div class="identity-group">
        <div class="avatar-large student-theme">
          {{ user.firstName?.charAt(0) }}
        </div>
        <div class="text-info">
          <h1 class="user-name">{{ user.firstName }} {{ user.lastName }}</h1>
          <div class="badges-row">
            <span class="badge-role">√âl√®ve</span>
            <span class="user-email">{{ user.email || 'Aucun email (Compte enfant)' }}</span>
          </div>
        </div>
      </div>
      
      <div class="header-actions">
        <app-button variant="ghost" (click)="suspendStudent()">
          Suspendre
        </app-button>
        <app-button variant="primary">
          Editer l'√©l√®ve
        </app-button>
      </div>

    </div>
  </div>

  <main class="dashboard-container">
    
    <section class="widgets-section">
      <div class="widgets-grid">
        
        <div class="widget-card accent-blue">
          <div class="widget-top">
            <div class="icon-circle blue">
              <app-small-icon icon="assets/icons/school.svg" [size]="32"></app-small-icon>
            </div>
            <h3>Niveau Scolaire</h3>
          </div>
          <div class="widget-content">
            <div class="main-info">
              <span class="big-text">{{ studentStats.gradeLevel }}</span>
            </div>
            <p class="subtext">Assiduit√©: <strong>{{ studentStats.averageAttendance }}</strong></p>
          </div>
        </div>

        <div class="widget-card accent-purple">
          <div class="widget-top">
             <div class="icon-circle purple">
               <app-small-icon icon="assets/icons/clock.svg" [size]="32"></app-small-icon>
             </div>
            <h3>Volume Horaire</h3>
          </div>
          <div class="widget-content">
            <div class="main-info">
              <span class="big-number">{{ studentStats.hoursConsumed }}h</span>
            </div>
            <p class="subtext">{{ studentStats.coursesCompleted }} cours termin√©s</p>
          </div>
        </div>

        <div class="widget-card accent-orange">
          <div class="widget-top">
            <div class="icon-circle orange">
              <app-small-icon icon="assets/icons/user.svg" [size]="32"></app-small-icon>
            </div>
            <h3>Compte Parent</h3>
          </div>
          <div class="widget-content">
            <div class="main-info">
              <span class="medium-text">{{ studentStats.parentName }}</span>
            </div>
            <p class="subtext">Responsable l√©gal & Payeur</p>
            <div class="link-action">
                <a class="text-link">Voir la fiche parent -></a>
            </div>
          </div>
        </div>

      </div>
    </section>

    <div class="content-split">
      
      <section class="details-card">
        <div class="card-header">
          <h2>üìÖ Prochains Cours</h2>
          <span class="badge-count">{{ upcomingCourses.length }} √† venir</span>
        </div>

        <div class="list-container">
          <div class="list-item" *ngFor="let course of upcomingCourses">
            <div class="date-box">
               <span class="day">{{ course.date.split(',')[0] }}</span>
               <span class="hour">{{ course.date.split(',')[1] }}</span>
            </div>
            
            <div class="item-info">
              <span class="item-title">{{ course.subject }}</span>
              <span class="item-sub">avec {{ course.tutor }}</span>
            </div>
            
            <div class="item-status">
              <span class="status-dot" [class.confirmed]="course.status === 'confirmed'" [class.pending]="course.status === 'pending'"></span>
              {{ course.status === 'confirmed' ? 'Confirm√©' : 'En attente' }}
            </div>
          </div>
        </div>
      </section>

      <section class="details-card">
        <div class="card-header">
          <h2>‚è±Ô∏è Activit√© R√©cente</h2>
        </div>
        
        <div class="activity-list">
          <div class="activity-item" *ngFor="let act of activityLogs">
            <div class="act-time">{{ act.date }}</div>
            <div class="act-content">
              <strong>{{ act.action }}</strong>
              <p>{{ act.detail }}</p>
            </div>
          </div>
        </div>

        <div class="card-footer">
          <app-button variant="ghost" >Voir l'historique complet</app-button>
        </div>
      </section>

    </div>
  </main>
</div>